<!-- <h2>My Downline</h2>
<ul>
  <li *ngFor="let u of downline">
    {{ u.username }} (level {{ u.level }}) parent: {{ u.parentId }}
  </li>
</ul> -->

<div class="my-downline-wrapper">
  <div class="container py-4">

    <!-- Heading -->
    <div class="d-flex align-items-center mb-4">
      <i class="bi bi-diagram-3-fill downline-icon me-2"></i>
      <div>
        <h3 class="mb-0">My Downline</h3>
        <small class="text-muted">Your direct + indirect hierarchical users</small>
      </div>
    </div>

    <!-- Empty state -->
    <div *ngIf="!downline?.length" class="text-center py-5 text-muted">
      <i class="bi bi-inbox fs-3 d-block mb-2"></i>
      No downline users found.
    </div>

    <!-- Downline list -->
    <div class="row g-3" *ngIf="downline.length">
      <div
        class="col-12"
        *ngFor="let u of downline"
      >
        <div class="card shadow-sm border-0 downline-item">
          <div class="card-body d-flex align-items-center gap-3">
            
            <!-- Avatar -->
            <div class="downline-avatar">
              {{ u.username?.[0] | uppercase }}
            </div>

            <!-- Info -->
            <div class="flex-grow-1">
              <div class="fw-semibold mb-1">{{ u.username }}</div>
              
              <div class="small text-muted">
                <span class="me-3">
                  <i class="bi bi-layers me-1 text-primary"></i>
                  Level: {{ u.level }}
                </span>

                <span>
                  <i class="bi bi-diagram-3 me-1 text-secondary"></i>
                  Parent: {{ u.parentId || '-' }}
                </span>
              </div>
            </div>

            <!-- Right indicator -->
            <span class="badge bg-primary-subtle text-primary border border-primary-subtle">
              L{{ u.level }}
            </span>

          </div>
        </div>
      </div>
    </div>

  </div>
</div>

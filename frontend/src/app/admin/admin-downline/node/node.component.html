<!-- <div style="margin-left:16px; margin-top:8px;">
      <div>
        <b>{{ node.username }}</b> ({{ node.role }}) — bal: {{ node.balance ?? 0 }} — level: {{ node.level }}
      </div>

      <div *ngFor="let c of node.children">
        <app-node [node]="c"></app-node>
      </div>
    </div> -->

<div class="downline-node">

  <!-- Node content -->
  <div class="downline-node-card">
    <div class="d-flex align-items-center">
      <!-- Avatar circle -->
      <div class="downline-avatar me-3">
        <span>{{ node.username?.[0] | uppercase }}</span>
      </div>

      <div class="flex-grow-1">
        <div class="d-flex align-items-center mb-1">
          <span class="fw-semibold me-2">
            {{ node.username }}
          </span>

          <!-- Role badge -->
          <span
            class="badge"
            [ngClass]="{
              'bg-danger-subtle text-danger border border-danger-subtle': node.role === 'ADMIN',
              'bg-primary-subtle text-primary border border-primary-subtle': node.role === 'OWNER',
              'bg-secondary-subtle text-secondary border border-secondary-subtle': node.role === 'USER'
            }"
          >
            {{ node.role }}
          </span>
        </div>

        <div class="small text-muted">
          <span class="me-3">
            <i class="bi bi-wallet2 me-1 text-success"></i>
            Bal:
            <span
              [ngClass]="{
                'text-success fw-semibold': (node.balance ?? 0) > 0,
                'text-danger fw-semibold': (node.balance ?? 0) < 0
              }"
            >
              {{ node.balance ?? 0 }}
            </span>
          </span>

          <span>
            <i class="bi bi-layers me-1 text-primary"></i>
            Level: {{ node.level }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Children -->
  <div class="downline-children" *ngIf="node.children?.length">
    <app-node
      *ngFor="let c of node.children"
      [node]="c"
    ></app-node>
  </div>
</div>
